# (2) TCP 커넥션, 프로토콜 버전, 웹 구성 등

## TCP는 어떻게 (순서 보장, 오류 없음, 조각 없는 데이터 스트림 등) 을 제공할 수 있을까?

- 모든 데이터 전송은 분할하여 전송하고 받을 땐 합친다. (조각 없는 데이터 스트림)
- 라우팅의 문제로 먼저 보낸 패킷이 나중에 도달할 수도 있는데 TCP 세그먼트에는 시퀸스 번호가 담겨 있어 도착할 때 세그먼트들을 합치는 과정에서 순서를 보장한다.
- 각 패킷은 checksum 등 오류를 파악할 수 있는 구조를 포함하고 있어 오류가 발생하면 재전송을 요청한다.
- 분할할 때는 한 번에 전송할 세그먼트의 크기를 정한다. 송수신 성공/실패 유무에 따라 세그먼트 크기는 변경된다. (속도 제어)

## 프록시를 써서 얻을 수 있는 장점에 대해 말해보자

- 웹 클라이언트 들의 데이터를 모아서 서버에 요청하기 때문에 중복되는 static resource 등을 캐싱할 수 있다.
- 모든 웹 클라이언트가 불필요하게 외부와 연결할 필요가 없다.
    - 클라(유저) 정보(대표적으로 IP) 추적을 회피할 수 있다.
- 목적지까지 가기 전에 프록시를 무조건 거쳐가게 만들면 클라(유저) 별로 접근을 제한할 수 있다.
    - 서버 쪽 망을 외부로부터 가릴 수 있다.

## 게이트웨이와 프록시의 차이점은?

[참고?](https://www.techwalla.com/articles/difference-between-a-proxy-server-a-gateway)

### 공통점

둘 모두 네트워크 내부 < - > 인터넷으로 트래픽을 라우팅함.

### 차이점

`게이트웨이`는 내부망과 외부망(서로 다른 통신망)을 나누는, 그 사이에 존재하는 관문.

또는, 서로 다른 프로토콜 사이에 통신을 도와주는 컴퓨터나 소프트웨어이다.

> 그 외의 특별한 redirect 나 접근 제어 등은 절대 지원 안하는건가..? 이건 프록시의 역할인가??

`프록시`는 주로 목적지에 가기 전에 거쳐가는 곳.

서버 입장에서는 외부로부터 내부망을 숨기기 위한 용도로 사용을 많이 함.

그렇기에 어떤 접근이냐에 따라 규칙에 맞는 행위(redirect, access denied 등)를 할 수도 있음.

무조건 서버에 붙어있는 것은 아님.

특정한 프록시 서버가 두 종단 간의 연결을 맺어주는 브로커 역할을 해줄 수도 있음.
